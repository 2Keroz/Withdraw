{% extends "../layouts/base.twig" %}

{% block main %}
	<style>
		.match-started {
			background-color: #f0f8ff; /* Couleur de fond pour les matchs commencés */
		}
	</style>
	<div class="min-h-screen bg-gray-100 py-12 px-4 sm:px-6 lg:px-8">
		<div class="max-w-7xl mx-auto">
			<div
				class="grid grid-cols-1 gap-8">
				<!-- Bouton pour créer un jeu -->
				<div class="mb-6 text-center">
					<a href="/admin/jeu/creer" class="bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition duration-300">Créer un Jeu</a>
				</div>

				<!-- Bouton pour créer une compétition -->
				<div class="mb-6 text-center">
					<a href="/admin/competition/creer" class="bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition duration-300">Créer une Compétition</a>
				</div>

				<!-- Bouton pour créer une équipe -->
				<div class="mb-6 text-center">
					<a href="/admin/equipe/creer" class="bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition duration-300">Créer une Équipe</a>
				</div>

				<!-- Bouton pour créer un match -->
				<div class="mb-6 text-center">
					<a href="/admin/match/creer" class="bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition duration-300">Créer un Match</a>
				</div>

				<!-- Section des utilisateurs -->
				<div class="bg-white rounded-lg shadow-lg overflow-hidden">
					<div class="px-6 py-8">
						<h1 class="text-2xl font-semibold text-center text-gray-800 mb-6">Gestion des utilisateurs</h1>
						<form action="#" method="GET" class="mb-6">
							<div class="flex space-x-4">
								<input type="text" name="query" placeholder="Rechercher par nom, prénom ou email" class="flex-grow border border-gray-300 rounded-lg py-2 px-4" required>
								<button type="submit" class="bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700 transition duration-300">Rechercher</button>
							</div>
						</form>

						<div class="overflow-x-auto">
							<table class="min-w-full divide-y divide-gray-200">
								<thead class="bg-gray-50">
									<tr>
										<th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ID</th>
										<th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Nom</th>
										<th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Prénom</th>
										<th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Email</th>
										<th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Points</th>
										<th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Rôle</th>
										<th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
									</tr>
								</thead>
								<tbody class="bg-white divide-y divide-gray-200">
									{% for utilisateur in utilisateurs %}
										<tr>
											<td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">{{ utilisateur.id }}</td>
											<td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">{{ utilisateur.nom }}</td>
											<td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">{{ utilisateur.prenom }}</td>
											<td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">{{ utilisateur.email }}</td>
											<td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">{{ utilisateur.points }}</td>
											<td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">{{ utilisateur.role }}</td>
											<td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
												<a href="/admin/utilisateur/{{ utilisateur.id }}/modifier" class="text-blue-600 hover:text-blue-900 mr-2">Modifier</a>
												<form action="/admin/utilisateur/{{ utilisateur.id }}/supprimer" method="POST" class="inline">
													<button type="submit" class="text-red-600 hover:text-red-900">Supprimer</button>
												</form>
											</td>
										</tr>
									{% endfor %}
								</tbody>
							</table>
						</div>
					</div>
				</div>

				<!-- Section des matchs non clôturés -->
				<div class="bg-white rounded-lg shadow-lg overflow-hidden">
					<div class="px-6 py-8">
						<h1 class="text-2xl font-semibold text-center text-gray-800 mb-6">Gestion des matchs non clôturés</h1>

						<form action="#" method="GET" class="mb-6">
							<div class="flex space-x-4">
								<input type="text" name="query" placeholder="Rechercher par équipe, date" class="flex-grow border border-gray-300 rounded-lg py-2 px-4" required>
								<button type="submit" class="bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700 transition duration-300">Rechercher</button>
							</div>
						</form>
						<div class="overflow-x-auto">
							<table class="min-w-full divide-y divide-gray-200">
								<thead class="bg-gray-50">
									<tr>
										<th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Match ID</th>
										<th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Équipe 1</th>
										<th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Équipe 2</th>
										<th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Date</th>
										<th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
									</tr>
								</thead>
								<tbody>
									{% for match in matchsNonClotures %}
									<tr class="{% if match.date|date('U') <= 'now'|date('U') %}match-started{% endif %}">
										<td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">{{ match.id }}</td>
										<td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">{{ match.equipe1.nom }}</td>
										<td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">{{ match.equipe2.nom }}</td>
										<td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">{{ match.date|date("d/m/Y H:i") }}</td>
										<td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
											<a href="/admin/match/{{ match.id }}/modifier" class="text-blue-600 hover:text-blue-900 mr-2">Modifier</a>
											<a href="/admin/match/{{ match.id }}/supprimer" class="text-red-600 hover:text-red-900">Supprimer</a>
											{% if match.date|date('U') <= 'now'|date('U') %}
												<a href="/admin/match/{{ match.id }}/cloturer" class="text-green-600 hover:text-green-900">Clôturer</a>
											{% endif %}
										</td>
									</tr>
									{% endfor %}
								</tbody>
							</table>
						</div>
					</div>
				</div>

				<!-- Section des matchs clôturés -->
				<div class="bg-white rounded-lg shadow-lg overflow-hidden">
					<div class="px-6 py-8">
						<h1 class="text-2xl font-semibold text-center text-gray-800 mb-6">Gestion des matchs clôturés</h1>

						<form action="#" method="GET" class="mb-6">
							<div class="flex space-x-4">
								<input type="text" name="query" placeholder="Rechercher par équipe, date" class="flex-grow border border-gray-300 rounded-lg py-2 px-4" required>
								<button type="submit" class="bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700 transition duration-300">Rechercher</button>
							</div>
						</form>
						<div class="overflow-x-auto">
							<table class="min-w-full divide-y divide-gray-200">
								<thead class="bg-gray-50">
									<tr>
										<th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Match ID</th>
										<th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Équipe 1</th>
										<th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Équipe 2</th>
										<th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Date</th>
										<th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Équipe Gagnante</th>
										<th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
									</tr>
								</thead>
								<tbody>
									{% for match in matchsClotures %}
										<tr class="bg-gray-200">
											<td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">{{ match.id }}</td>
											<td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">{{ match.equipe1.nom }}</td>
											<td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">{{ match.equipe2.nom }}</td>
											<td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">{{ match.date|date("d/m/Y H:i") }}</td>
											<td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">{{ match.equipeGagnante.nom }}</td>
											<td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
												<form action="/admin/match/{{ match.id }}/supprimer" method="POST" class="inline">
													<button type="submit" class="text-red-600 hover:text-red-900">Supprimer</button>
												</form>
											</td>
										</tr>
									{% endfor %}
								</tbody>
							</table>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
{% endblock %}
